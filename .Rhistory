item.codes <- read.xlsx("itemcodes.xls")
item.codes <- read.csv("itemcodes.csv")
item.codes
head(item.codes)
library(xlsx)
setwd("I:/User/Williams/2015 Interim/Publications/StateGrant")
state.data <- read.fwf("13state35.txt", widths = c(14, 3, 12, 2, 2, 2))
names(state.data) <- c("govid",
"itemcode",
"amount",
"surveyyear",
"datayear",
"origin")
item.codes <- read.csv("itemcodes.csv")
setwd("I:/User/Williams/2015 Interim/Publications/StateGrant")
state.data <- read.fwf("13state35.txt", widths = c(14, 3, 12, 2, 2, 2))
names(state.data) <- c("govid",
"itemcode",
"amount",
"surveyyear",
"datayear",
"origin")
item.codes <- read.csv("itemcodes.csv")
head(item.codes)
library(dplyr)
?merg
?merge
?dplyr
?mutate
?left_join
names(item.codes)[2] <- "itemcode"
state.data <- left.join(state.data, item.codes, by = "itemcode")
state.data <- left_join(state.data, item.codes, by = "itemcode")
state.data
class(state.data$itemcode)
library(dplyr)
setwd("I:/User/Williams/2015 Interim/Publications/StateGrant")
state.data <- read.fwf("13state35.txt", widths = c(14, 3, 12, 2, 2, 2))
names(state.data) <- c("govid",
"itemcode",
"amount",
"surveyyear",
"datayear",
"origin")
item.codes <- read.csv("itemcodes.csv")
names(item.codes)[1] <- "itemcode"
state.data <- left_join(state.data, item.codes, by = "itemcode")
class(item.codes$itemcode)
item.codes["itemcode"] <- as.character(item.codes["itemcode"])
state.data <- left_join(state.data, item.codes, by = "itemcode")
state.data
library(dplyr)
setwd("I:/User/Williams/2015 Interim/Publications/StateGrant")
state.data <- read.fwf("13state35.txt", widths = c(14, 3, 12, 2, 2, 2))
names(state.data) <- c("govid",
"itemcode",
"amount",
"surveyyear",
"datayear",
"origin")
item.codes <- read.csv("itemcodes.csv")
names(item.codes)[1] <- "itemcode"
item.codes["itemcode"] <- as.character(item.codes["itemcode"])
state.data <- left_join(state.data, item.codes, by = "itemcode")
state.data
head(state.data)
head(item.codes)
?read.csv
item.codes <- read.csv("itemcodes.csv", header = TRUE, sep = ",")
item.codes
head(item.codes)
library(dplyr)
setwd("I:/User/Williams/2015 Interim/Publications/StateGrant")
state.data <- read.fwf("13state35.txt", widths = c(14, 3, 12, 2, 2, 2))
names(state.data) <- c("govid",
"itemcode",
"amount",
"surveyyear",
"datayear",
"origin")
item.codes <- read.csv("itemcodes.csv", header = TRUE, sep = ",")
names(item.codes)[1] <- "itemcode"
item.codes["itemcode"] <- as.character(item.codes["itemcode"])
state.data <- left_join(state.data, item.codes, by = "itemcode")
item.codes
head(item.codes)
library(dplyr)
setwd("I:/User/Williams/2015 Interim/Publications/StateGrant")
state.data <- read.fwf("13state35.txt", widths = c(14, 3, 12, 2, 2, 2))
names(state.data) <- c("govid",
"itemcode",
"amount",
"surveyyear",
"datayear",
"origin")
item.codes <- read.csv("itemcodes.csv", header = TRUE, sep = ",")
names(item.codes)[1] <- "itemcode"
item.codes["itemcode"] <- str(item.codes["itemcode"])
state.data <- left_join(state.data, item.codes, by = "itemcode")
head(item.codes)
item.codes <- read.csv("itemcodes.csv", header = TRUE, sep = ",")
head(item.codes)
names(item.codes)[1] <- "itemcode"
head(item.codes)
item.codes[,1] <- str(item.codes[,1])
class(item.codes$itemcode)
item.codes <- read.csv("itemcodes.csv", header = TRUE, sep = ",", stringsAsFactors = FALSE)
names(item.codes)[1] <- "itemcode"
state.data <- left_join(state.data, item.codes, by = "itemcode")
head(item.codes)
library(dplyr)
setwd("I:/User/Williams/2015 Interim/Publications/StateGrant")
state.data <- read.fwf("13state35.txt", widths = c(14, 3, 12, 2, 2, 2))
names(state.data) <- c("govid",
"itemcode",
"amount",
"surveyyear",
"datayear",
"origin")
item.codes <- read.csv("itemcodes.csv", header = TRUE, sep = ",", stringsAsFactors = FALSE)
names(item.codes)[1] <- "itemcode"
state.data <- left_join(state.data, item.codes, by = "itemcode")
head(state.data)
class(state.data$itemcode)
class(item.codes$itemcode)
state.data <- read.fwf("13state35.txt", widths = c(14, 3, 12, 2, 2, 2))
names(state.data) <- c("govid",
"itemcode",
"amount",
"surveyyear",
"datayear",
"origin")
class(state.data$itemcode)
as.character(state.data$itemcode)
state.data$itemcode <- as.character(state.data$itemcode)
class(state.data$itemcode)
library(dplyr)
setwd("I:/User/Williams/2015 Interim/Publications/StateGrant")
#read fixed width file
state.data <- read.fwf("13state35.txt", widths = c(14, 3, 12, 2, 2, 2))
#name columns
names(state.data) <- c("govid",
"itemcode",
"amount",
"surveyyear",
"datayear",
"origin")
#convert factor to character vector
state.data$itemcode <- as.character(state.data$itemcode)
#Read in item codes data frame
item.codes <- read.csv("itemcodes.csv", header = TRUE, sep = ",", stringsAsFactors = FALSE)
names(item.codes)[1] <- "itemcode"
state.data <- left_join(state.data, item.codes, by = "itemcode")
head(state.data)
#Clean up data for making graph chart
graphcategories <- debtdata %>%
filter(mn.category != "") %>% #exclude uncategorized schools
filter(!(is.na(debt_mdn))) %>% #exclude not available data
filter(debt_mdn != "PrivacySuppressed") %>% #exclude privacy suppressed data
filter(data.year != 1996) %>% #exclude 1996 because the data is missing
mutate(debt_mdn = as.numeric(debt_mdn)) %>% #convert median debt number to
group_by(mn.category, data.year, DegreeLevel) %>%
summarise(meandebt = mean(debt_mdn))
graph <- graphcategories %>%
filter(DegreeLevel == "Certificate/Associates" | DegreeLevel == "Bachelor's") %>%
ggplot(aes(x=data.year,
y=meandebt,
color=factor(mn.category),
group = factor(mn.category)))
graph +
geom_line(size = 1.5) +
scale_x_continuous("", limits = c(1997, 2013), breaks = c(1997, 2001, 2005, 2009, 2013)) +
scale_y_continuous("Average Median Debt Amount Upon Entering Repayment", limits = c(0,20000), labels=dollar) +
guides(linetype = guide_legend(title = "")) +
theme_minimal() +
theme(legend.position = "bottom") +
facet_wrap(~DegreeLevel)
##################
###   setup    ###
##################
working.directory <- "I:/User/Williams/2016 Interim/College Scorecard Analysis"
setwd(working.directory)
library(dplyr)
library(ggplot2)
library(scales)
library(ggthemes)
load("debtdata_clean.rda")
##################
###Inspect Data###
##################
### get number of missings and uncategorized by year
brokenyears <- debtdata %>%
group_by(data.year) %>%
summarise(missings=sum(is.na(debt_mdn)),
uncategorized = sum(mn.category == ""),
suppressed = sum(debt_mdn == "PrivacySuppressed", na.rm=TRUE),
datapresent = sum(!(is.na(debt_mdn)) & !(mn.category == "") & !(debt_mdn=="PrivacySuppressed")),
count=n()
)
brokenyears
####################################
## Debt by Institution type Graph ##
####################################
#Clean up data for making graph chart
graphcategories <- debtdata %>%
filter(mn.category != "") %>% #exclude uncategorized schools
filter(!(is.na(debt_mdn))) %>% #exclude not available data
filter(debt_mdn != "PrivacySuppressed") %>% #exclude privacy suppressed data
filter(data.year != 1996) %>% #exclude 1996 because the data is missing
mutate(debt_mdn = as.numeric(debt_mdn)) %>% #convert median debt number to
group_by(mn.category, data.year, DegreeLevel) %>%
summarise(meandebt = mean(debt_mdn))
graph <- graphcategories %>%
filter(DegreeLevel == "Certificate/Associates" | DegreeLevel == "Bachelor's") %>%
ggplot(aes(x=data.year,
y=meandebt,
color=factor(mn.category),
group = factor(mn.category)))
graph +
geom_line(size = 1.5) +
scale_x_continuous("", limits = c(1997, 2013), breaks = c(1997, 2001, 2005, 2009, 2013)) +
scale_y_continuous("Average Median Debt Amount Upon Entering Repayment", limits = c(0,20000), labels=dollar) +
guides(linetype = guide_legend(title = "")) +
theme_minimal() +
theme(legend.position = "bottom") +
facet_wrap(~DegreeLevel)
##################
###   setup    ###
##################
working.directory <- "I:/User/Williams/2016 Interim/College Scorecard Analysis"
setwd(working.directory)
library(dplyr)
library(ggplot2)
library(scales)
library(ggthemes)
load("debtdata_clean.rda")
##################
###Inspect Data###
##################
### get number of missings and uncategorized by year
brokenyears <- debtdata %>%
group_by(data.year) %>%
summarise(missings=sum(is.na(debt_mdn)),
uncategorized = sum(mn.category == ""),
suppressed = sum(debt_mdn == "PrivacySuppressed", na.rm=TRUE),
datapresent = sum(!(is.na(debt_mdn)) & !(mn.category == "") & !(debt_mdn=="PrivacySuppressed")),
count=n()
)
brokenyears
####################################
## Debt by Institution type Graph ##
####################################
#Clean up data for making graph chart
graphcategories <- debtdata %>%
filter(mn.category != "") %>% #exclude uncategorized schools
filter(!(is.na(debt_mdn))) %>% #exclude not available data
filter(debt_mdn != "PrivacySuppressed") %>% #exclude privacy suppressed data
filter(data.year != 1996) %>% #exclude 1996 because the data is missing
mutate(debt_mdn = as.numeric(debt_mdn)) %>% #convert median debt number to
group_by(mn.category, data.year, DegreeLevel) %>%
summarise(meandebt = mean(debt_mdn))
graph <- graphcategories %>%
filter(DegreeLevel == "Certificate/Associates" | DegreeLevel == "Bachelor's") %>%
ggplot(aes(x=data.year,
y=meandebt,
color=factor(mn.category),
group = factor(mn.category)))
graph +
geom_line(size = 1.5) +
scale_x_continuous("", limits = c(1997, 2013), breaks = c(1997, 2001, 2005, 2009, 2013)) +
scale_y_continuous("Average Median Debt Amount Upon Entering Repayment", limits = c(0,20000), labels=dollar) +
guides(linetype = guide_legend(title = "")) +
theme_minimal() +
theme(legend.position = "bottom") +
facet_wrap(~DegreeLevel)
twoyeargraph <- graphcategories %>%
filter(DegreeLevel == "Certificate/Associates") %>%
ggplot(aes(x=data.year,
y=meandebt,
linetype=factor(mn.category),
group = factor(mn.category)))
twoyeargraph +
geom_line(size = 1.5) +
scale_x_continuous("Year", limits = c(1997, 2013), breaks = c(1997, 2001, 2005, 2009, 2013)) +
scale_y_continuous("Average Median Debt Amount Upon Entering Repayment", limits = c(0,15000), labels=dollar) +
guides(linetype = guide_legend(title = "")) +
theme_minimal() +
theme(legend.position = "bottom")
##################
###   setup    ###
##################
working.directory <- "I:/User/Williams/2016 Interim/College Scorecard Analysis"
setwd(working.directory)
library(dplyr)
library(ggplot2)
library(scales)
library(ggthemes)
load("debtdata_clean.rda")
##################
###Inspect Data###
##################
### get number of missings and uncategorized by year
brokenyears <- debtdata %>%
group_by(data.year) %>%
summarise(missings=sum(is.na(debt_mdn)),
uncategorized = sum(mn.category == ""),
suppressed = sum(debt_mdn == "PrivacySuppressed", na.rm=TRUE),
datapresent = sum(!(is.na(debt_mdn)) & !(mn.category == "") & !(debt_mdn=="PrivacySuppressed")),
count=n()
)
brokenyears
####################################
## Debt by Institution type Graph ##
####################################
#Clean up data for making graph chart
graphcategories <- debtdata %>%
filter(mn.category != "") %>% #exclude uncategorized schools
filter(!(is.na(debt_mdn))) %>% #exclude not available data
filter(debt_mdn != "PrivacySuppressed") %>% #exclude privacy suppressed data
filter(data.year != 1996) %>% #exclude 1996 because the data is missing
mutate(debt_mdn = as.numeric(debt_mdn)) %>% #convert median debt number to
group_by(mn.category, data.year, DegreeLevel) %>%
summarise(meandebt = mean(debt_mdn))
graph <- graphcategories %>%
filter(DegreeLevel == "Certificate/Associates" | DegreeLevel == "Bachelor's") %>%
ggplot(aes(x=data.year,
y=meandebt,
color=factor(mn.category),
group = factor(mn.category)))
graph +
geom_line(size = 1.5) +
scale_x_continuous("", limits = c(1997, 2013), breaks = c(1997, 2001, 2005, 2009, 2013)) +
scale_y_continuous("Average Median Debt Amount Upon Entering Repayment", limits = c(0,20000), labels=dollar) +
guides(linetype = guide_legend(title = "")) +
theme_minimal() +
theme(legend.position = "bottom") +
facet_wrap(~DegreeLevel)
##################
###   setup    ###
##################
#working.directory <- "I:/User/Williams/2016 Interim/College Scorecard Analysis"
working.directory <- "~/Documents/hrd/collegescorecardanalysis"
setwd(working.directory)
library(dplyr)
library(ggplot2)
library(scales)
load("debtdata_clean.rda")
##################
###Inspect Data###
##################
### get number of missings and uncategorized by year
brokenyears <- debtdata %>%
group_by(data.year) %>%
summarise(missings=sum(is.na(debt_mdn)),
uncategorized = sum(mn.category == ""),
suppressed = sum(debt_mdn == "PrivacySuppressed", na.rm=TRUE),
datapresent = sum(!(is.na(debt_mdn)) & !(mn.category == "") & !(debt_mdn=="PrivacySuppressed")),
count=n()
)
brokenyears
####################################
## Debt by Institution type Graph ##
####################################
#Clean up data for making graph chart
graphcategories <- debtdata %>%
filter(mn.category != "") %>% #exclude uncategorized schools
filter(!(is.na(debt_mdn))) %>% #exclude not available data
filter(debt_mdn != "PrivacySuppressed") %>% #exclude privacy suppressed data
filter(data.year != 1996) %>% #exclude 1996 because the data is missing
mutate(debt_mdn = as.numeric(debt_mdn)) %>% #convert median debt number to
group_by(mn.category, data.year, DegreeLevel) %>%
summarise(meandebt = mean(debt_mdn))
####################################
##Side by Side Face Graph by inst ##
####################################
graph <- graphcategories %>%
filter(DegreeLevel == "Certificate/Associates" | DegreeLevel == "Bachelor's") %>%
ggplot(aes(x=data.year,
y=meandebt,
color=factor(mn.category),
group = factor(mn.category)))
setEPS()
postscript("debttrendsidebyside.eps", width=1000, height=600)
graph +
geom_line(size = 1.5) +
scale_x_continuous("", limits = c(1997, 2013), breaks = c(1997, 2001, 2005, 2009, 2013)) +
scale_y_continuous("Average Median Debt Amount Upon Entering Repayment", limits = c(0,20000), labels=dollar) +
guides(color = guide_legend(title = "")) +
theme_minimal() +
theme(legend.position = "bottom") +
theme(axis.text.y = element_text(size=10))+
facet_grid(.~DegreeLevel)
##################
###   setup    ###
##################
#working.directory <- "I:/User/Williams/2016 Interim/College Scorecard Analysis"
working.directory <- "~/Documents/hrd/collegescorecardanalysis"
setwd(working.directory)
library(dplyr)
library(ggplot2)
library(scales)
load("debtdata_clean.rda")
##################
###Inspect Data###
##################
### get number of missings and uncategorized by year
brokenyears <- debtdata %>%
group_by(data.year) %>%
summarise(missings=sum(is.na(debt_mdn)),
uncategorized = sum(mn.category == ""),
suppressed = sum(debt_mdn == "PrivacySuppressed", na.rm=TRUE),
datapresent = sum(!(is.na(debt_mdn)) & !(mn.category == "") & !(debt_mdn=="PrivacySuppressed")),
count=n()
)
brokenyears
####################################
## Debt by Institution type Graph ##
####################################
#Clean up data for making graph chart
graphcategories <- debtdata %>%
filter(mn.category != "") %>% #exclude uncategorized schools
filter(!(is.na(debt_mdn))) %>% #exclude not available data
filter(debt_mdn != "PrivacySuppressed") %>% #exclude privacy suppressed data
filter(data.year != 1996) %>% #exclude 1996 because the data is missing
mutate(debt_mdn = as.numeric(debt_mdn)) %>% #convert median debt number to
group_by(mn.category, data.year, DegreeLevel) %>%
summarise(meandebt = mean(debt_mdn))
####################################
##Side by Side Face Graph by inst ##
####################################
graph <- graphcategories %>%
filter(DegreeLevel == "Certificate/Associates" | DegreeLevel == "Bachelor's") %>%
ggplot(aes(x=data.year,
y=meandebt,
color=factor(mn.category),
group = factor(mn.category)))
setEPS()
postscript("debttrendsidebyside.eps", width=1000, height=600)
graph +
geom_line(size = 1.5) +
scale_x_continuous("", limits = c(1997, 2013), breaks = c(1997, 2001, 2005, 2009, 2013)) +
scale_y_continuous("Average Median Debt Amount Upon Entering Repayment", limits = c(0,20000), labels=dollar) +
guides(color = guide_legend(title = "")) +
theme_minimal() +
theme(legend.position = "bottom") +
theme(axis.text.y = element_text(size=10))+
facet_grid(.~DegreeLevel)
dev.off()
graph +
geom_line(size = 1.5) +
scale_x_continuous("", limits = c(1997, 2013), breaks = c(1997, 2001, 2005, 2009, 2013)) +
scale_y_continuous("Average Median Debt Amount Upon Entering Repayment", limits = c(0,20000), labels=dollar) +
guides(color = guide_legend(title = "")) +
theme_minimal() +
theme(legend.position = "bottom") +
theme(axis.text.y = element_text(size=10))+
facet_grid(.~DegreeLevel)
##################
###   setup    ###
##################
#working.directory <- "I:/User/Williams/2016 Interim/College Scorecard Analysis"
working.directory <- "~/Documents/hrd/collegescorecardanalysis"
setwd(working.directory)
library(dplyr)
library(ggplot2)
library(scales)
load("debtdata_clean.rda")
##################
###Inspect Data###
##################
### get number of missings and uncategorized by year
brokenyears <- debtdata %>%
group_by(data.year) %>%
summarise(missings=sum(is.na(debt_mdn)),
uncategorized = sum(mn.category == ""),
suppressed = sum(debt_mdn == "PrivacySuppressed", na.rm=TRUE),
datapresent = sum(!(is.na(debt_mdn)) & !(mn.category == "") & !(debt_mdn=="PrivacySuppressed")),
count=n()
)
brokenyears
####################################
## Debt by Institution type Graph ##
####################################
#Clean up data for making graph chart
graphcategories <- debtdata %>%
filter(mn.category != "") %>% #exclude uncategorized schools
filter(!(is.na(debt_mdn))) %>% #exclude not available data
filter(debt_mdn != "PrivacySuppressed") %>% #exclude privacy suppressed data
filter(data.year != 1996) %>% #exclude 1996 because the data is missing
mutate(debt_mdn = as.numeric(debt_mdn)) %>% #convert median debt number to
group_by(mn.category, data.year, DegreeLevel) %>%
summarise(meandebt = mean(debt_mdn))
####################################
##Side by Side Face Graph by inst ##
####################################
graph <- graphcategories %>%
filter(DegreeLevel == "Certificate/Associates" | DegreeLevel == "Bachelor's") %>%
ggplot(aes(x=data.year,
y=meandebt,
color=factor(mn.category),
group = factor(mn.category)))
graph +
geom_line(size = 1.5) +
scale_x_continuous("", limits = c(1997, 2013), breaks = c(1997, 2001, 2005, 2009, 2013)) +
scale_y_continuous("Average Median Debt Amount Upon Entering Repayment", limits = c(0,20000), labels=dollar) +
guides(color = guide_legend(title = "")) +
theme_minimal() +
theme(legend.position = "bottom") +
theme(axis.text.y = element_text(size=10))+
facet_grid(.~DegreeLevel)
graph +
geom_line(size = 1.5)
